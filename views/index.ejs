<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>หน้าหลัก</title>

    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css">

<!--echart-->
<script src="https://cdn.jsdelivr.net/npm/echarts@5.1.2/dist/echarts.min.js"></script>


<!--axios-->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script src='/pdf/pdfmake/build/pdfmake.min.js'></script>
<script src='/pdf/pdfmake/build/vfs_fonts.js'></script>



</head>
<body>
    <div class="container-fluid">
        <div class="row flex-nowrap">
            <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-dark">
                <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">
                    <a href="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                        <span class="fs-5 d-none d-sm-inline">WMA</span>
                    </a>
                    <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
                        <li class="nav-item">
                            <a href="#" class="nav-link align-middle px-0 text-light">
                                <i class="fs-4 bi-house"></i> <span class="ms-1 d-none d-sm-inline">รายงานเชิงบริหาร</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/maps" class="nav-link align-middle px-0 text-light">
                                <i class="bi bi-geo-alt"></i> <span class="ms-1 d-none d-sm-inline">แผนที่</span>
                            </a>
                        </li>
                      
                        <li>
                            <a href="/search" class="nav-link px-0 align-middle text-light">
                                <i class="bi bi-search"></i><span class="ms-1 d-none d-sm-inline">ระบบสืบค้นข้อมูลคุณภาพน้ำ</span></a>
                        </li>
                        <!---
                        <li>
                            <a href="#submenu2" data-bs-toggle="collapse" class="nav-link px-0 align-middle ">
                                <i class="fs-4 bi-bootstrap"></i> <span class="ms-1 d-none d-sm-inline">Bootstrap</span></a>
                            <ul class="collapse nav flex-column ms-1" id="submenu2" data-bs-parent="#menu">
                                <li class="w-100">
                                    <a href="#" class="nav-link px-0"> <span class="d-none d-sm-inline">Item</span> 1</a>
                                </li>
                                <li>
                                    <a href="#" class="nav-link px-0"> <span class="d-none d-sm-inline">Item</span> 2</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#submenu3" data-bs-toggle="collapse" class="nav-link px-0 align-middle">
                                <i class="fs-4 bi-grid"></i> <span class="ms-1 d-none d-sm-inline">Products</span> </a>
                                <ul class="collapse nav flex-column ms-1" id="submenu3" data-bs-parent="#menu">
                                <li class="w-100">
                                    <a href="#" class="nav-link px-0"> <span class="d-none d-sm-inline">Product</span> 1</a>
                                </li>
                                <li>
                                    <a href="#" class="nav-link px-0"> <span class="d-none d-sm-inline">Product</span> 2</a>
                                </li>
                                <li>
                                    <a href="#" class="nav-link px-0"> <span class="d-none d-sm-inline">Product</span> 3</a>
                                </li>
                                <li>
                                    <a href="#" class="nav-link px-0"> <span class="d-none d-sm-inline">Product</span> 4</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="nav-link px-0 align-middle">
                                <i class="fs-4 bi-people"></i> <span class="ms-1 d-none d-sm-inline">Customers</span> </a>
                        </li>
                    </ul>
                    <hr>
                    --->
                </div>
            </div>
            <div class="col py-3">
                <!-- Page Wrapper -->
    <div id="wrapper" style="">
        <br>

        

       <!-- Content Wrapper -->
       <div id="content-wrapper" class="d-flex flex-column">

           <!-- Main Content -->
           <div id="content">

              

               <!-- Begin Page Content -->
               <div class="container-fluid">

                   <!-- Page Heading -->
          
                   <div class="d-sm-flex align-items-center justify-content-between mb-4" >
                       <div class="containner" style=" width: 50%;" >
                        <h3>รายงานเชิงบริหาร</h3>    
                       </div>
              
                   
                    <div class = "container" style=" padding-left: 70%;  ">
                        <button type="button" class="btn btn-outline-primary" id="make-pdf2">ออกรายงาน</button>
                    </div>
                </div>
                   
                   <!-- Content Row -->
                   <div class="row">

                       <!-- Earnings (Monthly) Card Example -->
                       <div class="col-xl-3 col-md-6 mb-4">
                           <div class="card border-left-primary shadow h-100 py-2">
                               <div class="card-body">
                                   <div class="row no-gutters align-items-center">
                                       <div class="col mr-2">
                                           <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                               ปริมาณน้ำเสียต่อปี </div>
                                           <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="yearly"></span></div>
                                       </div>
                                       <!-- <div class="col-auto">
                                           <i class="fas fa-calendar fa-2x text-gray-300"></i>
                                       </div> -->
                                   </div>
                               </div>
                           </div>
                       </div>

                       <!-- Earnings (Monthly) Card Example -->
                       <div class="col-xl-3 col-md-6 mb-4">
                           <div class="card border-left-success shadow h-100 py-2">
                               <div class="card-body">
                                   <div class="row no-gutters align-items-center">
                                       <div class="col mr-2">
                                           <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                               ปริมาณน้ำเสียต่อเดือน</div>
                                           <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="monthly"></span></div>
                                       </div>
                                       <div class="col-auto">
                                           <!--<i class="fas fa-dollar-sign fa-2x text-gray-300"></i>-->
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>

                       <!-- Earnings (Monthly) Card Example -->
                       <div class="col-xl-3 col-md-6 mb-4">
                           <div class="card border-left-success shadow h-100 py-2">
                               <div class="card-body">
                                   <div class="row no-gutters align-items-center">
                                       <div class="col mr-2">
                                           <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                               ปริมาณน้ำเสียประจำวัน</div>
                                           <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="daily"></span></div>
                                       </div>
                                       <div class="col-auto">
                                           <!--<i class="fas fa-dollar-sign fa-2x text-gray-300"></i>-->
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>

                       <!-- Earnings (Monthly) Card Example -->
                       <div class="col-xl-3 col-md-6 mb-4">
                           <div class="card border-left-info shadow h-100 py-2">
                               <div class="card-body">
                                   <div class="row no-gutters align-items-center">
                                       <div class="col mr-2">
                                           <div class="text-xs font-weight-bold text-info text-uppercase mb-1"> ปริมาณน้ำเสียรายวันเทียบแผน
                                           </div>
                                           <div class="row no-gutters align-items-center">
                                               <div class="col-auto">
                                                   <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">92%</div>
                                               </div>
                                               <div class="col">
                                                   <div class="progress progress-sm mr-2">
                                                       <div class="progress-bar bg-info" role="progressbar"
                                                           style="width: 92%" aria-valuenow="50" aria-valuemin="0"
                                                           aria-valuemax="100"></div>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                       <div class="col-auto">
                                           <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>

                      

                   <!-- Content Row -->

                   <div class="row">

                      <!-- Area Chart -->
                      <div class="col-xl-12 col-lg-12">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div
                                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">ปริมาณน้ำเสียที่ผ่านการบำบัด จำแนกตามวันภายในเดือน</h6>
                                <div class="dropdown no-arrow">
                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                        aria-labelledby="dropdownMenuLink">
                                        <div class="dropdown-header">เลือกช่วงเวลา:</div>
                                        <a class="dropdown-item" href="#">รายสัปดาห์</a>
                                        <a class="dropdown-item" href="#">รายเดือน</a>
                                        <a class="dropdown-item" href="#">รายปี</a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="#">กำหนดเอง</a>
                                    </div>
                                </div>
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="chart-area">
                                     <div id="water_monthly" style="width: 100%; height: 320px"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                        <!-- Area Chart -->
                        <div class="col-xl-6 col-lg-6">
                           <div class="card shadow mb-4">
                               <!-- Card Header - Dropdown -->
                               <div
                                   class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                   <h6 class="m-0 font-weight-bold text-primary">ปริมาณน้ำเสียที่ผ่านการบำบัด จำแนกตามรายเดือน</h6>
                                   <div class="dropdown no-arrow" >
                                       <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                           <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                       </a>
                                       <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                           aria-labelledby="dropdownMenuLink">
                                           <div class="dropdown-header">การแสดงผลของแผนที่:</div>
                                           <a class="dropdown-item" href="#">หมุดปกติ</a>
                                           <a class="dropdown-item" href="#">หมุดค่า DO</a>
                                           
                                           <div class="dropdown-divider"></div>
                                           <a class="dropdown-item" href="#">ระบบคาดการณ์</a>
                                       </div>
                                   </div>
                               </div>
                               <!-- Card Body -->
                               <div class="card-body">
                                   <div class="chart-area">
                                        <div id="waterchart_monthly" style="width: 100%; height: 320px;"></div>                                
                                    </div>
                               </div>
                           </div>
                       </div>


                        <!-- Area Chart -->
                        <div class="col-xl-6 col-lg-6">
                           <div class="card shadow mb-4">
                               <!-- Card Header - Dropdown -->
                               <div
                                   class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                   <h6 class="m-0 font-weight-bold text-primary">ปริมาณน้ำเสียที่ผ่านการบำบัด จำแนกตามไตรมาสต์</h6>
                                   <div class="dropdown no-arrow" >
                                       <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                           <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                       </a>
                                       <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                           aria-labelledby="dropdownMenuLink">
                                           <div class="dropdown-header">การแสดงผลของแผนที่:</div>
                                           <a class="dropdown-item" href="#">หมุดปกติ</a>
                                           <a class="dropdown-item" href="#">หมุดค่า DO</a>
                                           
                                           <div class="dropdown-divider"></div>
                                           <a class="dropdown-item" href="#">ระบบคาดการณ์</a>
                                       </div>
                                   </div>
                               </div>
                               <!-- Card Body -->
                               <div class="card-body">
                                   <div class="chart-area">
                                        <div id="waterchart_quarter" style="width: 100%; height: 320px;"></div>                                
                                    </div>
                               </div>
                           </div>
                       </div>
                        <!-- Area Chart -->
                        <div class="col-xl-6 col-lg-6">
                           <div class="card shadow mb-4">
                               <!-- Card Header - Dropdown -->
                               <div
                                   class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                   <h6 class="m-0 font-weight-bold text-primary">จำนวนสถานีจำแนกตามคุณภาพน้ำ</h6>
                                   <div class="dropdown no-arrow" >
                                       <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                           <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                       </a>
                                       <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                           aria-labelledby="dropdownMenuLink">
                                           <div class="dropdown-header">การแสดงผลของแผนที่:</div>
                                           <a class="dropdown-item" href="#">หมุดปกติ</a>
                                           <a class="dropdown-item" href="#">หมุดค่า DO</a>
                                           
                                           <div class="dropdown-divider"></div>
                                           <a class="dropdown-item" href="#">ระบบคาดการณ์</a>
                                       </div>
                                   </div>
                               </div>
                               <!-- Card Body -->
                               <div class="card-body">
                                   <div class="chart-area">
                                        <div id="water_bar" style="width: 100%; height: 320px;"></div>                                
                                    </div>
                               </div>
                           </div>
                       </div>


                        <!-- Area Chart -->
                        <div class="col-xl-6 col-lg-6">
                           <div class="card shadow mb-4">
                               <!-- Card Header - Dropdown -->
                               <div
                                   class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                   <h6 class="m-0 font-weight-bold text-primary">จำนวนสถานีจำแนกตามคุณภาพน้ำ</h6>
                                   <div class="dropdown no-arrow">
                                       <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                           <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                       </a>
                                       <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                           aria-labelledby="dropdownMenuLink">
                                           <div class="dropdown-header">การแสดงผลของแผนที่:</div>
                                           <a class="dropdown-item" href="#">หมุดปกติ</a>
                                           <a class="dropdown-item" href="#">หมุดค่า DO</a>
                                           
                                           <div class="dropdown-divider"></div>
                                           <a class="dropdown-item" href="#">ระบบคาดการณ์</a>
                                       </div>
                                   </div>
                               </div>
                               <!-- Card Body -->
                               <div class="card-body">
                                   <div class="chart-area">
                                        <div id="water_pie" style="width: 100%; height: 320px;"></div>                                
                                    </div>
                               </div>
                           </div>
                       </div>




                     
                       
                      

                   </div>

                   <!-- Content Row -->

               

                   

             

               </div>
               <!-- /.container-fluid -->

               <div class="container-fluid">

                <!-- Page Heading -->
                
               
                    
                <!-- DataTales Example -->
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">ข้อมูลปริมาณน้ำเสียและคุณภาพน้ำ</h6>
                    </div>
                    <div class="card-body">
                        <% if (locals.data) { %>
 
                            <div class="table-responsive-sm ">
                            <table class="table table-sm  table-hover table-borderedless">
                                <thead class="table-primary">
                                <tr >
                                    <th rowspan="2" class="align-middle" style="background-color: #64b5f6; color: black;">
                                        ที่
                                    </th>
                                    <th rowspan="2" class="align-middle" style="background-color: #64b5f6;color: black;">ศูนย์บริหารจัดการคุณภาพน้ำ</th>
                                    <th rowspan="2" class="align-middle" style="background-color: #88ffff;color: black;">ปริมาณน้ำเสีย</th>
                                    <th colspan="2" style="background-color: #73e8ff; color: black;">ค่าออกซิเจนที่ละลายน้ำ</th>
                                
                                    <th colspan="2" style="background-color: #88ffff; color: black;;">ค่าอุณหภูมิ</th>
                                    
                                    <th colspan="2" style="background-color: #73e8ff;color: black;">ค่าความกรด-ด่าง</th>
                           
                                   
                                    
                                </tr>
                                <tr>
                             
                                    
                           
                                    <th scope="col" style="background-color: #73e8ff; color: black;">ก่อนบำบัด</th>
                                    <th scope="col" style="background-color: #73e8ff; color: black">หลังบำบัด</th>
                                    <th scope="col" style="background-color: #88ffff; color: black">ก่อนบำบัด</th>
                                    <th scope="col" style="background-color: #88ffff; color: black">หลังบำบัด</th>
                                    <th scope="col" style="background-color: #73e8ff; color: black">ก่อนบำบัด</th>
                                    <th scope="col" style="background-color: #73e8ff; color: black">หลังบำบัด</th>
                                   
                                    
                                </tr>
                                </thead>
                                <% 
                                for (d of data) { 
                                    let dt = new Date(Date.parse(d.date_added))
                                    let df = `${dt.getDate()}-${dt.getMonth() + 1}-${dt.getFullYear()}`
                                %>
                                <tbody>
                                    <tr>
                                        <% if ((d.treated_water < 10) || (d.treated_doo < 2)){ %>
                                        <td style="color : #FF0000; background-color: #f2f0ff;" ><%= d.level1_approval %></td>
                                        <td style="color : #FF0000; background-color: #f2f0ff;"><%= d.level2_approval %></td>
                                        <% } else {%>
                                            <td  style="background-color: #f2f0ff ;"><%= d.level1_approval %></td>
                                            <td  style="background-color: #f2f0ff ;"><%= d.level2_approval %></td>
                                        <% } %>


                                        <% if (d.treated_water < 10) { %>
                                        <td style="color : #FF0000;"><%= d.treated_water %></td>
                                        <% } else {%>
                                        <td ><%= d.treated_water %></td>
                                        <% } %>
                                        
                                        <% if (d.do == 0) { %>
                                        <td style="color : #FF0000; background-color: #f2f0ff ;"><%= d.do %></td>
                                        <% } else {%>
                                        <td style="background-color: #f2f0ff ;"><%= d.do %></td>
                                        <% } %>

                                        <% if (d.treated_doo < 2) { %>
                                        <td  style="color : #FF0000; background-color: #f2f0ff ;"><%= d.treated_doo %></td>
                                        <% } else {%>
                                        <td style="background-color: #f2f0ff ;"><%= d.treated_doo %></td>
                                        <% } %>

                                        <% if (d.temp < 1) { %>
                                        <td style="color : #FF0000;"><%= d.temp %></td>
                                        <% } else {%>
                                        <td ><%= d.temp %></td>
                                        <% } %>
                                        
                                        <% if (d.treated_temp < 1) { %>
                                        <td style="color : #FF0000;"><%= d.treated_temp %></td>
                                        <% } else {%>
                                        <td ><%= d.treated_temp %></td>
                                        <% } %>

                                        <% if (d.ph < 1) { %>
                                        <td style="color : #FF0000; background-color: #f2f0ff ;"><%= d.ph %></td>
                                        <% } else {%>
                                        <td style="background-color: #f2f0ff ;"><%= d.ph %></td>
                                        <% } %>

                                        <% if (d.treated_ph < 1) { %>
                                        <td style="color : #FF0000;"><%= d.treated_ph %></td>
                                        <% } else {%>
                                        <td ><%= d.treated_ph %></td>
                                        <% } %>
                                       
                                    </tr>
                                </tbody>
                                <% } %>
                            </table>
                            <% } %>
                    </div>
                </div>

            </div>
            <!-- /.container-fluid -->

           </div>
           <!-- End of Main Content -->
          

           <!-- Footer -->
           <footer class="sticky-footer bg-white">
               <div class="container my-auto">
                   <div class="copyright text-center my-auto">
                       <span>Copyright &copy; Your Website 2021</span>
                   </div>
               </div>
           </footer>
           <!-- End of Footer -->

       </div>
       <!-- End of Content Wrapper -->

   </div>
   <!-- End of Page Wrapper -->
            </div>
        </div>
    </div>





    <!---------------------------- เริ่มต้น Scrip ------------------------------------->

    <!-- กราฟปริมาณน้ำรายวัน-------------------------------- -->
    
    <script type="text/javascript">
        // based on prepared DOM, initialize echarts instance
        var myChart = echarts.init(document.getElementById("water_monthly"));
  
        // specify chart configuration item and data
        option = {
title: {
    text: '',
    subtext: 'ปริมาณ'
},
tooltip: {
    trigger: 'axis'
},
legend: {
    data: ['น้ำเสีย']
},
toolbox: {
    show: true,
    feature: {
        dataView: {show: true, readOnly: false},
        magicType: {show: true, type: ['line', 'bar']},
        restore: {show: true},
        saveAsImage: {show: true}
    }
},
calculable: true,
xAxis: [
    {
        type: 'category',
        
        data:  [1,2,3,4,5,6,7,8,9,10]
    }
],
yAxis: [
    {
        type: 'value'
    }
],
series: [
    {
        name: 'น้ำเสีย',
        type: 'line',
        data: [3.47, 3.21, 3.31, 3.21, 3.40, 3.58, 3.58, ],
        markPoint: {
            data: [
                {type: 'max', name: '最大值'},
                {type: 'min', name: '最小值'}
            ]
        },
        markLine: {
            data: [
                {type: 'average', name: 'ค่าเฉลี่ย'}
            ]
        }
    }
]
};

  
        // use configuration item and data specified to show chart
        //myChart.setOption(option);

      </script>





<!-- กราฟพาย ---------------------------------------------------->
    
    <script type="text/javascript">
        // based on prepared DOM, initialize echarts instance
        var myChart1 = echarts.init(document.getElementById("water_pie"));
  
        // specify chart configuration item and data
        option1 = {
            toolbox: {
        feature: {
            dataView: {show: true, readOnly: false},
            magicType: {show: true, type: ['line', 'bar']},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
        tooltip: {
        trigger: 'item',
        formatter: '{a} <br/>{b}: {c} ({d}%)'
        },
        legend: {
        orient: 'vertical',
        left: 10,
        data: ['ปกติ', 'เฝ้าระวัง', 'วิกฤต', 'ไม่มีผล']
        },
    series: [
        {
            name: 'name',
            type: 'pie',
            selectedMode: 'single',
            radius: [0, '30%'],

            label: {
                position: 'inner'
            },
            labelLine: {
                show: false
            },
            data: [
                {value: 335, name: 'X', selected: true},
                {value: 679, name: 'Y'},
                {value: 1548, name: 'Z'}
            ]
        },
        {
            name: 'จำนวน',
            type: 'pie',
            radius: ['40%', '55%'],
            label: {
                formatter: '{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ',
                backgroundColor: '#eee',
                borderColor: '#aaa',
                borderWidth: 1,
                borderRadius: 4,
                // shadowBlur:3,
                // shadowOffsetX: 2,
                // shadowOffsetY: 2,
                // shadowColor: '#999',
                // padding: [0, 7],
                rich: {
                    a: {
                        color: '#999',
                        lineHeight: 22,
                        align: 'center'
                    },
                    // abg: {
                    //     backgroundColor: '#333',
                    //     width: '100%',
                    //     align: 'right',
                    //     height: 22,
                    //     borderRadius: [4, 4, 0, 0]
                    // },
                    hr: {
                        borderColor: '#aaa',
                        width: '100%',
                        borderWidth: 0.5,
                        height: 0
                    },
                    b: {
                        fontSize: 16,
                        lineHeight: 33
                    },
                    per: {
                        color: '#eee',
                        backgroundColor: '#334455',
                        padding: [2, 4],
                        borderRadius: 2
                    }
                }
            },
            data: [
                {value: 335, name: 'A'},
                {value: 310, name: 'B'},
                {value: 234, name: 'C'},
                {value: 135, name: 'D'},
                {value: 1048, name: 'E'},
                {value: 251, name: 'F'},
                {value: 147, name: 'G'},
                {value: 102, name: 'H'}
            ],
            
        }
    ]
};


        //console.log(option1.series[0].data)
        
        // use configuration item and data specified to show chart
        //myChart1.setOption(option1);    
</script>





<!-- สถิติ ค่า do -------------------------------------------->
<script type="text/javascript">

        // based on prepared DOM, initialize echarts instance
        var myChart2 = echarts.init(document.getElementById("water_bar"));
  
        option2 = {
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            crossStyle: {
                color: '#999'
            }
        }
    },
    toolbox: {
        feature: {
            dataView: {show: true, readOnly: false},
            magicType: {show: true, type: ['line', 'bar']},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
    legend: {
        data: ['DO ก่อนบำบัด', 'DO หลังบำบัด', 'เส้น']
    },
    xAxis: [
        {
            type: 'category',
            data: ['0.5', '1.0', '1.5', '2.0', '2.5', '3.0', '3.5', '4.0', '4.5', '5.0', '5.5','6.0','6.5','7.0','7.5','8.0'],
            axisPointer: {
                type: 'shadow'
            }
        }
    ],
    yAxis: [
        {
            type: 'value',
            name: 'จำนวนสถานี',
            min: 0,
            max: 15,
            interval: 1,
            axisLabel: {
                formatter: '{value}'
            }
        },
        {
            type: 'value',
            name: 'จำนวนสถานี',
            min: 0,
            max: 15,
            interval: 1,
            axisLabel: {
                formatter: '{value}'
            }
        }
    ],
    series: [
        {
            name: 'DO ก่อนบำบัด',
            type: 'bar',
            data: [2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3]
        },
        {
            name: 'DO หลังบำบัด',
            type: 'bar',
            data: [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3]
        },
        /*
        {
            name: 'เส้น',
            type: 'line',
            yAxisIndex: 1,
            data: [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2]
        }
        */
    ]
};
   
</script>



<!--  กราฟ น้ำรายเดือน --------------------------------------->
<script type="text/javascript">
    // based on prepared DOM, initialize echarts instance
    var myChart_monthly = echarts.init(document.getElementById("waterchart_monthly"));

    option3 = {
title: {
    text: '',
    subtext: 'ปริมาณ'
},
tooltip: {
    trigger: 'axis'
},
legend: {
    data: ['น้ำเสีย']
},
toolbox: {
    show: true,
    feature: {
        dataView: {show: true, readOnly: false},
        magicType: {show: true, type: ['line', 'bar']},
        restore: {show: true},
        saveAsImage: {show: true}
    }
},
calculable: true,
xAxis: [
    {
        type: 'category',
        
        data: ["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."]
    }
],
yAxis: [
    {
        type: 'value',
       
    }
],
series: [
    {
        name: 'น้ำเสีย',
        type: 'bar',
        data: [3.47, 3.21, 3.31, 3.21, 3.40, 3.58, 3.58, ],
        markPoint: {
            data: [
                {type: 'max', name: '最大值'},
                {type: 'min', name: '最小值'}
            ]
        },
        markLine: {
            data: [
                {type: 'average', name: 'ค่าเฉลี่ย'}
            ]
        }
    }
]
};



    // use configuration item and data specified to show chart
    

</script>




<!--  กราฟรายไตรมาส --------------------------------------->
<script type="text/javascript">
    // based on prepared DOM, initialize echarts instance
    var myChart_quarter = echarts.init(document.getElementById("waterchart_quarter"));

    option4 = {
title: {
    text: '',
    subtext: 'ปริมาณ'
},
tooltip: {
    trigger: 'axis'
},
legend: {
    data: ['น้ำเสีย']
},
toolbox: {
    show: true,
    feature: {
        dataView: {show: true, readOnly: false},
        magicType: {show: true, type: ['line', 'bar']},
        restore: {show: true},
        saveAsImage: {show: true}
    }
},
calculable: true,
xAxis: [
    {
        type: 'category',
        
        data: ["ไตรมาสต์ที่ 1","ไตรมาสต์ที่ 2","ไตรมาสต์ที่ 3","ไตรมาสต์ที่ 4"]
    }
],
yAxis: [
    {
        type: 'value',
       
    }
],
series: [
    {
        name: 'น้ำเสีย',
        type: 'bar',
        data: [3.47, 3.21, 3.31, 3.21, 3.40, 3.58, 3.58, ],
        markPoint: {
            data: [
                {type: 'max', name: '最大值'},
                {type: 'min', name: '最小值'}
            ]
        },
        markLine: {
            data: [
                {type: 'average', name: 'ค่าเฉลี่ย'}
            ]
        }
    }
]
};



    // use configuration item and data specified to show chart
    

</script>



<script>

const waterchart_monthly = () => {
axios

.get("/all-year")
.then((response) => {
  console.log(response.data);
 // console.log(data);
 let numWater = response.data.data.length
 //console.log(numWater)
 let sum_monthly = [0,0,0,0,0 ,0,0,0,0,0 ,0,0]
 

 
 for (i=0; i < numWater; i++){

    if (response.data.data[i].month == 1){
        sum_monthly[0] = sum_monthly[0] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 2){
        sum_monthly[1] = sum_monthly[1] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 3){
        sum_monthly[2] = sum_monthly[2] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 4){
        sum_monthly[3] = sum_monthly[3] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 5){
        sum_monthly[4] = sum_monthly[4] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 6){
        sum_monthly[5] = sum_monthly[5] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 7){
        sum_monthly[6] = sum_monthly[6] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 8){
        sum_monthly[7] = sum_monthly[7] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 9){
        sum_monthly[8] = sum_monthly[8] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 10){
        sum_monthly[9] = sum_monthly[9] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 11){
        sum_monthly[10] = sum_monthly[10] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month == 12){
        sum_monthly[11] = sum_monthly[11] + response.data.data[i].treated_water
    }
 }

 for (i=0 ; i < sum_monthly.length ; i++){
     sum_monthly[i] = parseInt(sum_monthly[i]);
    console.log(sum_monthly[i])
 }
 console.log(sum_monthly)

 option3.series[0].data = sum_monthly
 

 myChart_monthly.setOption(option3);
});
};

waterchart_monthly()




</script>



<script>

const waterchart_quarter = () => {
axios

.get("/all-year")
.then((response) => {
  console.log(response.data);
 // console.log(data);
 let numWater = response.data.data.length
 //console.log(numWater)
 let sum_quarter = [0,0,0,0]
 

 
 for (i=0; i < numWater; i++){

    if (response.data.data[i].month >= 1 && response.data.data[i].month <= 3){
        sum_quarter[0] = sum_quarter[0] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month > 3 && response.data.data[i].month <= 6){
        sum_quarter[0] = sum_quarter[0] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month > 6 && response.data.data[i].month <= 9){
        sum_quarter[0] = sum_quarter[0] + response.data.data[i].treated_water
    }
    else if (response.data.data[i].month > 9 && response.data.data[i].month <= 12){
        sum_quarter[0] = sum_quarter[0] + response.data.data[i].treated_water
    }
 }

 for (i=0 ; i < sum_quarter.length ; i++){
     sum_quarter[i] = parseInt(sum_quarter[i]);
    console.log(sum_quarter[i])
 }
 console.log(sum_quarter)

 option4.series[0].data = sum_quarter
 

 myChart_quarter.setOption(option4);
});
};

waterchart_quarter()




</script>

<script>
    
const waterdaily = document.getElementById("daily");


const getdata = () => {
  axios
    
    .get("/totalwater-daily")
    .then((response) => {
      //console.log(response.data);
     // console.log(data);
     let numWater = response.data.data.length
     //console.log(numWater)
     let sum = 0
     for (i=0; i < numWater; i++){
        sum = sum+response.data.data[i].treated_water
     }
     let sum2 = parseInt(sum)
     waterdaily.innerHTML = sum2.toLocaleString("en-US");
    // getdo00.innerHTML = response.data.data[0].treated_water;
   
      
    });
};

/*getBtn.addEventListener("click", getdata);
*/

getdata()
</script>

<script>
    
const wateryearly = document.getElementById("yearly");


const getdata_year = () => {
  axios
    
    .get("/all-year")
    .then((response) => {
      //console.log(response.data);
     // console.log(data);
     let numWater = response.data.data.length
     //console.log(numWater)
     let sum = 0
     for (i=0; i < numWater; i++){
        sum = sum+response.data.data[i].treated_water
     }
     let sum2 = parseInt(sum)
     wateryearly.innerHTML = sum2.toLocaleString("en-US");
    // getdo00.innerHTML = response.data.data[0].treated_water;
   
      
    });
};

/*getBtn.addEventListener("click", getdata);
*/

getdata_year()
</script>





<script>
    
const watermonthly = document.getElementById("monthly");


const getdata2 = () => {
  axios
    
    .get("/totalwater-monthly")
    .then((response) => {
     // console.log(response.data);
     // console.log(data);
     let numWater = response.data.data.length
     //console.log(numWater)
     let sum = 0
     for (i=0; i < numWater; i++){
        sum = sum+response.data.data[i].treated_water
     }
     
     let sum2 = parseInt(sum);
      watermonthly.innerHTML = sum2.toLocaleString("en-US");
    // getdo01.innerHTML = response.data.data[0].treated_water;
   
      
    });
};

/*getBtn.addEventListener("click", getdata);
*/

getdata2()

</script>

 <script>
const data_pie = () => {
  axios
    
    .get("/do-daily")
    .then((response) => {
     // console.log(response.data);
     // console.log(data);
     let numWater = response.data.data.length
     //console.log(numWater)
     let good = 0
     let care = 0
     let bad = 0
     let eiei = []
     for (i=0; i < numWater; i++){
        if (response.data.data[i].treated_doo >= 3){
            good = good+1
        }
        else if(response.data.data[i].treated_doo < 3 && response.data.data[i].treated_doo >= 2){
            care = care+1
        }
        else if(response.data.data[i].treated_doo < 2 && response.data.data[i].treated_doo > 0){
            bad = bad+1
        }
     }

     let nodo = 50 - good - care - bad
    // console.log("จำนวนสถานีคุณภาพน้ำปกติ",good)
    // console.log("จำนวนสถานีคุณภาพน้ำเฝ้าระวัง",care)
    // console.log("จำนวนสถานีคุณภาพน้ำแย่",bad)
     //console.log("ไม่มีข้อมูล",nodo)
    
    eiei = [
                {value: good, name: 'ปกติ'},
                {value: care, name: 'เฝ้าระวัง'},
                {value: bad, name: 'วิกฤต'},
                {value: nodo, name: 'ไม่มีผล'},
            
            ]
    option1.series[0].data = eiei;
    option1.series[1].data = eiei;
    myChart1.setOption(option1);
    

    let cstat = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];
    for (i=0; i < numWater; i++){
        if (parseInt((response.data.data[i].treated_doo)*10) >= 80){
            cstat[15] = cstat[15]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 75){
            cstat[14] = cstat[14]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 70){
            cstat[13] = cstat[13]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 65){
            cstat[12] = cstat[12]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 60){
            cstat[11] = cstat[11]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 55){
            cstat[10] = cstat[10]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 50){
            cstat[9] = cstat[9]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 45){
            cstat[8] = cstat[8]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 40){
            cstat[7] = cstat[7]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 35){
            cstat[6] = cstat[6]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 30){
            cstat[5] = cstat[5]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 25){
            cstat[4] = cstat[4]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 20){
            cstat[3] = cstat[3]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 15){
            cstat[2] = cstat[2]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 10){
            cstat[1] = cstat[1]+1
        }
        else if (parseInt((response.data.data[i].treated_doo)*10) >= 5){
            cstat[0] = cstat[0]+1
        }
        
     }
     //console.log("cstat",cstat)

    let cstat2 = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];
    for (i=0; i < numWater; i++){
        if (parseInt((response.data.data[i].do)*10) >= 80){
            cstat2[15] = cstat[15]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 75){
            cstat2[14] = cstat[14]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 70){
            cstat2[13] = cstat[13]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 65){
            cstat2[12] = cstat[12]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 60){
            cstat2[11] = cstat[11]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 55){
            cstat2[10] = cstat[10]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 50){
            cstat2[9] = cstat[9]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 45){
            cstat2[8] = cstat[8]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 40){
            cstat2[7] = cstat[7]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 35){
            cstat2[6] = cstat[6]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 30){
            cstat2[5] = cstat[5]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 25){
            cstat2[4] = cstat[4]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 20){
            cstat2[3] = cstat[3]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 15){
            cstat2[2] = cstat[2]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 10){
            cstat2[1] = cstat[1]+1
        }
        else if (parseInt((response.data.data[i].do)*10) >= 5){
            cstat2[0] = cstat[0]+1
        }
        
     }
    // console.log("cstat2",cstat2)

     //console.log("option2",option2)
     option2.series[0].data = cstat2;
     option2.series[1].data = cstat;

     
    myChart2.setOption(option2);



    });
    
};                                  

data_pie()
 </script>





<script>
    const waterchart = () => {
  axios
    
    .get("/totalwater-monthly")
    .then((response) => {
      //console.log(response.data);
     // console.log(data);
     let numWater = response.data.data.length
     //console.log(numWater)
     let sum = 0
     let waterbyday = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
     
     for (i=0; i < numWater; i++){
        
        waterbyday[response.data.data[i].day-1] = parseInt(response.data.data[i].treated_water)+waterbyday[response.data.data[i].day-1]
     }

     //console.log('yoyo :',waterbyday)
     option.series[0].data = waterbyday
     option.xAxis[0].data = [1,2,3,4,5,6,7,8,9,10]
     myChart.setOption(option);
    });
};

waterchart()
</script>

<script src="/js/script2.js"></script>


    
</body>
</html>